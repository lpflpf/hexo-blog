webpackJsonp([0],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("el-header",[e("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","default-active":"1",router:"true"}},[e("el-menu-item",{attrs:{index:"1",route:{name:"Sql2Go"}}},[this._v("SQL转Struct")]),this._v(" "),e("el-menu-item",{attrs:{index:"2",route:{name:"Json2Go"}}},[this._v("Json转Struct")]),this._v(" "),e("el-menu-item",{attrs:{index:"3",route:{name:"FormatJson"}}},[this._v("Json格式化")]),this._v(" "),e("el-menu-item",{staticStyle:{float:"right"}},[e("a",{attrs:{target:"_blank",href:"https://github.com/lpflpf"}},[e("svg",{staticClass:"octicon octicon-mark-github v-align-middle",attrs:{height:"32",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z",fill:"#409eff"}})])])])],1)],1),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},o,!1,function(t){n("pcBl")},null,null).exports,r={name:"Sql2Go",data:()=>({msg:"sql convert to golang struct",useGorm:!0,useJson:!0,useForm:!0,sqlContent:""}),watch:{},computed:{structContent(){return this.sql2go(this.sqlContent,this.useGorm,this.useJson,this.useForm)}},methods:{sql2go:function(t,e,n,o){let s={tinyint:"int64",smallint:"int64",int:"int64",mediumint:"int64",bigint:"int64",float:"float64",double:"float64",decimal:"float64",char:"string",varchar:"string",text:"string",mediumtext:"string",longtext:"string",time:"time.Time",date:"time.Time",datetime:"time.Time",timestramp:"int64",enum:"string",set:"string",blob:"string"};function r(t){const e=t.toLowerCase().split("_");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].substring(1,e[t].length);return e.join("")}function l(t){const e=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return t.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(t,n,o){return e.indexOf(o.toUpperCase())>=0?n+o.toUpperCase():n+o[0].toUpperCase()+o.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(t,n,o){return e.indexOf(n+o.toUpperCase())>=0?(n+o).toUpperCase():n+o})}if(""===t.trim())return"";let a=/CREATE\sTABLE\s`([\w_]+)\`\s\(/gim.exec(t);if(!a)return"invalid sql";let i,c=r(a[1].trim()),u=t.substring(a[0].length).trim(),p="type "+c+" struct {";for(;a=/^\`([\w_]+)\`\s+(tinyint|smallint|int|mediumint|bigint|float|double|decimal|varchar|char|text|mediumtext|longtext|datetime|time|date|enum|set|blob)?.*[^`]+/.exec(u);){let t=r(a[1]);const c=s[a[2]];let m=a[1].toLowerCase();p+="\n\t"+(t=l(t))+" "+c+" ",i=[],e&&i.push('gorm:"column:'+m+'"'),n&&i.push('json:"'+m+'"'),o&&i.push('form:"'+m+'"'),i.length>0&&(p+="`"+i.join(" ")+"`"),u=u.substring(a[0].length),(a=/COMMENT\s+['"](.*)['"]/gi.exec(a[0]))&&(p+="  // "+a[1])}return p+="\n}"}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Sql2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{staticStyle:{"margin-left":"50px",color:"#5daf34"},attrs:{span:2}},[n("span",{staticStyle:{float:"right"}},[t._v("Options:")])]),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-checkbox",{model:{value:t.useGorm,callback:function(e){t.useGorm=e},expression:"useGorm"}},[t._v("gorm")]),t._v(" "),n("el-checkbox",{model:{value:t.useJson,callback:function(e){t.useJson=e},expression:"useJson"}},[t._v("json")]),t._v(" "),n("el-checkbox",{model:{value:t.useForm,callback:function(e){t.useForm=e},expression:"useForm"}},[t._v("form")])],1)],1)]),t._v(" "),n("el-divider"),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"SQL"}},[n("el-input",{attrs:{type:"textarea",placeholder:"建表语句",rows:26},model:{value:t.sqlContent,callback:function(e){t.sqlContent=e},expression:"sqlContent"}})],1)],1)],1)]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"Struct"}},[n("el-input",{attrs:{type:"textarea",placeholder:"Golang Struct 语句",rows:26,value:t.structContent}})],1)],1)],1)])],1)],1)},staticRenderFns:[]},a=n("VU/8")(r,l,!1,null,null,null).exports,i={name:"Json2Go",data:()=>({msg:"json convert to golang struct",useGorm:!0,useJson:!0,useForm:!0,flatten:!0,jsonContent:""}),computed:{structContent(){return""===this.jsonContent?"":this.jsonToGo(this.jsonContent,this.useGorm,this.useJson,this.useForm,this.flatten)}},methods:{jsonToGo:function(t,e,n,o,s=!0){let r,l,a="",i=0;const c={},u=[];let p="",m=0,f="";try{l=r=JSON.parse(t.replace(/:(\s*\d*)\.0/g,":$1.1"))}catch(t){return t.message}return b(`type ${j("AutoGenerated")} `),d(l),s?a+=p:a;function d(t,e=0){if("object"==typeof t&&null!==t)if(Array.isArray(t)){let n;const o=t.length;for(let e=0;e<o;e++){const o=S(t[e]);if(n){if(n!=o&&"interface{}"==(n=C(o,n)))break}else n=o}const r=s&&["struct","slice"].includes(n)?`[]${f}`:"[]";if(s&&e>=2?x(r):b(r),"struct"==n){const n={};for(let e=0;e<o;e++){const o=Object.keys(t[e]);for(let s in o){let r=o[s];if(r in n){const o=n[r].value,s=t[e][r];if(y(o,s)){O(Object.keys(s),Object.keys(o))||(n[r=`${r}_${"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}`]={value:s,count:0})}}else n[r]={value:t[e][r],count:0};n[r].count++}}const s=Object.keys(n),r={},l={};for(let t in s){const e=s[t],a=n[e];r[e]=a.value,l[e]=a.count!=o}h(e+1,m,r,l)}else"slice"==n?d(t[0],e):s&&e>=2?x(n||"interface{}"):b(n||"interface{}")}else s&&(e>=2?x(f):b(f)),h(e+1,m,t);else s&&e>=2?x(S(t)):b(S(t))}function h(t,r,l,a){if(s&&u.push(t>=2?"\n":""),s&&t>=2){const s=`type ${f}`,i=function(t){for(let e in t)t[e]=j(t[e]);return t}(Object.keys(l));if(f in c&&O(i,c[f]))return void u.pop();c[f]=i,x(`${s} struct {\n`),++r;const p=Object.keys(l);for(let s in p){const i=_(p[s]);v(r);const c=j(i);x(c+" "),f=c,d(l[p[s]],t);let u=[];if(e&&u.push('gorm:"column:'+i+'"'),n){let t='json:"'+i;a&&!0===a[p[s]]?t+=',omitempty"':t+='"',u.push(t)}o&&u.push('form:"'+i+'"'),u.length>0&&x(" `"+u.join(" ")+"`"),x("\n")}v(--r),x("}")}else{b("struct {\n"),++i;const s=Object.keys(l);for(let r in s){const c=_(s[r]);g(i);const u=j(c);b(u+" "),f=u,d(l[s[r]],t);let p=[];if(e&&p.push('gorm:"column:'+c+'"'),n){let t='json:"'+c;a&&!0===a[s[r]]?t+=',omitempty"':t+='"',p.push(t)}o&&p.push('form:"'+c+'"'),p.length>0&&b("`"+p.join(" ")+"`"),b("\n")}g(--i),b("}")}s&&(p+=u.pop())}function g(t){for(let e=0;e<t;e++)a+="\t"}function b(t){a+=t}function v(t){for(let e=0;e<t;e++)u[u.length-1]+="\t"}function x(t){u[u.length-1]+=t}function j(t){if(!t)return"";if(t.match(/^\d+$/))t="Num"+t;else if(t.charAt(0).match(/\d/)){t={0:"Zero_",1:"One_",2:"Two_",3:"Three_",4:"Four_",5:"Five_",6:"Six_",7:"Seven_",8:"Eight_",9:"Nine_"}[t.charAt(0)]+t.substr(1)}return function(t){const e=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return t.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(t,n,o){return e.indexOf(o.toUpperCase())>=0?n+o.toUpperCase():n+o[0].toUpperCase()+o.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(t,n,o){return e.indexOf(n+o.toUpperCase())>=0?(n+o).toUpperCase():n+o})}(t).replace(/[^a-z0-9]/gi,"")||"NAMING_FAILED"}function S(t){if(null===t)return"interface{}";switch(typeof t){case"string":return/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(\+\d\d:\d\d|Z)/.test(t)?"time.Time":"string";case"number":return t%1==0?t>-2147483648&&t<2147483647?"int":"int64":"float64";case"boolean":return"bool";case"object":return Array.isArray(t)?"slice":"struct";default:return"interface{}"}}function C(t,e){return"float"==t.substr(0,5)&&"int"==e.substr(0,3)?t:"int"==t.substr(0,3)&&"float"==e.substr(0,5)?e:"interface{}"}function _(t){const e=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(t.length>=36){const n=t.substr(-36);if(e.test(n))return t.slice(0,-37)}return t}function y(t,e){return"[object Object]"===Object.prototype.toString.call(t)&&"[object Object]"===Object.prototype.toString.call(e)}function O(t,e){const n=t.length,o=e.length;if(0==n&&0==o)return!0;if(n!=o)return!1;for(let n of t)if(!e.includes(n))return!1;return!0}}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Json2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{staticStyle:{"margin-left":"50px",color:"#5daf34"},attrs:{span:2}},[n("span",{staticStyle:{float:"right"}},[t._v("Options:")])]),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-checkbox",{model:{value:t.useGorm,callback:function(e){t.useGorm=e},expression:"useGorm"}},[t._v("gorm")]),t._v(" "),n("el-checkbox",{model:{value:t.useJson,callback:function(e){t.useJson=e},expression:"useJson"}},[t._v("json")]),t._v(" "),n("el-checkbox",{model:{value:t.useForm,callback:function(e){t.useForm=e},expression:"useForm"}},[t._v("form")]),t._v(" "),n("el-checkbox",{model:{value:t.flatten,callback:function(e){t.flatten=e},expression:"flatten"}},[t._v("flatten")])],1)],1)]),t._v(" "),n("el-divider"),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"Json"}},[n("el-input",{attrs:{type:"textarea",placeholder:"输入 Json 结构",rows:26},model:{value:t.jsonContent,callback:function(e){t.jsonContent=e},expression:"jsonContent"}})],1)],1)],1)]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"Struct"}},[n("el-input",{attrs:{type:"textarea",placeholder:"Golang Struct 语句",rows:26,value:t.structContent}})],1)],1)],1)])],1)],1)},staticRenderFns:[]},u=n("VU/8")(i,c,!1,null,null,null).exports,p={name:"FormatJson",data:()=>({msg:"格式化json",jsonContent:"",escapeUnicode:!1,sortObjectKeys:!0,jsonPatternOk:!0,jsonFormat:""}),watch:{jsonContent(t){this.$options.methods.formatJson(this,t,this.escapeUnicode,this.sortObjectKeys)},escapeUnicode(t){this.$options.methods.formatJson(this,this.jsonContent,t,this.sortObjectKeys)},sortObjectKeys(t){this.$options.methods.formatJson(this,this.jsonContent,this.escapeUnicode,t)}},methods:{formatJson(t,e,n,o){if(t.jsonPatternOk&&(document.getElementById("jsoneditor").innerHTML=""),t.jsonPatternOk=!0,t.jsonFormat="",""!==e)try{let s=JSON.parse(e),r={mode:"view",escapeUnicode:n,sortObjectKeys:o,navigationBar:!1};new JSONEditor(document.getElementById("jsoneditor"),r,s).expandAll(),t.jsonFormat="",t.jsonContent=JSON.stringify(s,null,"  ")}catch(e){t.jsonPatternOk=!1,t.jsonFormat=e.message}}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",{staticClass:"Json2Go"},[n("el-row",{attrs:{gutter:24}},[n("h2",[n("el-col",{staticStyle:{"margin-left":"50px",color:"#5daf34"},attrs:{span:2}},[n("span",{staticStyle:{float:"right"}},[t._v("Options:")])]),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-checkbox",{model:{value:t.sortObjectKeys,callback:function(e){t.sortObjectKeys=e},expression:"sortObjectKeys"}},[t._v("sortKeys")]),t._v(" "),n("el-checkbox",{model:{value:t.escapeUnicode,callback:function(e){t.escapeUnicode=e},expression:"escapeUnicode"}},[t._v("escapeUnicode")])],1)],1)]),t._v(" "),n("el-divider"),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"Json"}},[n("el-input",{attrs:{type:"textarea",placeholder:"输入 Json 语句",rows:26},model:{value:t.jsonContent,callback:function(e){t.jsonContent=e},expression:"jsonContent"}})],1)],1)],1)]),t._v(" "),n("el-col",{staticStyle:{height:"600px"},attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px"}},[n("el-form-item",{attrs:{label:"Result"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.jsonPatternOk,expression:"jsonPatternOk"}],attrs:{id:"jsoneditor"}}),t._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.jsonPatternOk,expression:"!jsonPatternOk"}],attrs:{type:"textarea",rows:26},model:{value:t.jsonFormat,callback:function(e){t.jsonFormat=e},expression:"jsonFormat"}})],1)],1)],1)])],1)],1)},staticRenderFns:[]},f=n("VU/8")(p,m,!1,null,null,null).exports,d=new VueRouter({routes:[{path:"/",name:"Sql2Go",component:a},{path:"/json2go",name:"Json2Go",component:u},{path:"/formatJson",name:"FormatJson",component:f}]});Vue.config.productionTip=!1,new Vue({el:"#app",router:d,components:{App:s},template:"<App/>"})},pcBl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.54c69d2759d4febe1280.js.map